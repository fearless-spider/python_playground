# -*- coding: utf-8 -*-
import htmlentitydefs, re
from datetime import datetime, timedelta
import time
import email

__author__ = 'fearless'

# live path for files
path = ""
# dev path
import os
import smtplib
import mimetypes
from email.utils import parsedate_tz
from email.MIMEMultipart import MIMEMultipart
from email.MIMEBase import MIMEBase
from email.MIMEText import MIMEText
from email.MIMEAudio import MIMEAudio
from email.MIMEImage import MIMEImage
from email.Encoders import encode_base64

# debugging
debug = 0

# os.environ['TZ'] = 'America/New_York'
# path = "./"
# now date for files
now = datetime.now()
now_finals = datetime.today() - timedelta(days=1)

date_format = "%Y%m%d"
date_format_mlb = "%m%d"


class Meta:
    event_id = 0
    meta_key = ''
    meta_value = ''


class Member:
    group_id = 0
    user_id = 1
    inviter_id = 0
    is_confirmed = 1
    is_admin = 1
    user_title = 'Group Admin'


# replace not ascii characters in given string
def replace_nonascii(text):
    nonascii = {
        u"€": '', u"™": '',
        # html translation table ISO-8859-1 | tosiek - http://tosiek.pl/
        u"\xa0": '&#160;', u"\xa1": '&#161;', u"\xa2": '&#162;', u"\xa3": '&#163;', u"\xa4": '&#164;',
        u"\xa5": '&#165;',
        u"\xa6": '&#166;', u"\xa7": '&#167;', u"\xa8": '&#168;', u"\xa9": '&#169;', u"\xaa": '&#170;',
        u"\xab": '&#171;',
        u"\xac": '&#172;', u"\xad": '&#173;', u"\xae": '&#174;', u"\xaf": '&#175;', u"\xb0": '&#176;',
        u"\xb1": '&#177;',
        u"\xb2": '&#178;', u"\xb3": '&#179;', u"\xb4": '&#180;', u"\xb5": '&#181;', u"\xb6": '&#182;',
        u"\xb7": '&#183;',
        u"\xb8": '&#184;', u"\xb9": '&#185;', u"\xba": '&#186;', u"\xbb": '&#187;', u"\xbc": '&#188;',
        u"\xbd": '&#189;',
        u"\xbe": '&#190;', u"\xbf": '&#191;', u"\xc0": '&#192;', u"\xc1": '&#193;', u"\xc2": '&#194;',
        u"\xc3": '&#195;',
        u"\xc4": '&#196;', u"\xc5": '&#197;', u"\xc6": '&#198;', u"\xc7": '&#199;', u"\xc8": '&#200;',
        u"\xc9": '&#201;',
        u"\xca": '&#202;', u"\xcb": '&#203;', u"\xcc": '&#204;', u"\xcd": '&#205;', u"\xce": '&#206;',
        u"\xcf": '&#207;',
        u"\xd0": '&#208;', u"\xd1": '&#209;', u"\xd2": '&#210;', u"\xd3": '&#211;', u"\xd4": '&#212;',
        u"\xd5": '&#213;',
        u"\xd6": '&#214;', u"\xd7": '&#215;', u"\xd8": '&#216;', u"\xd9": '&#217;', u"\xda": '&#218;',
        u"\xdb": '&#219;',
        u"\xdc": '&#220;', u"\xdd": '&#221;', u"\xde": '&#222;', u"\xdf": '&#223;', u"\xe0": '&#224;',
        u"\xe1": '&#225;',
        u"\xe2": '&#226;', u"\xe3": '&#227;', u"\xe4": '&#228;', u"\xe5": '&#229;', u"\xe6": '&#230;',
        u"\xe7": '&#231;',
        u"\xe8": '&#232;', u"\xe9": '&#233;', u"\xea": '&#234;', u"\xeb": '&#235;', u"\xec": '&#236;',
        u"\xed": '&#237;',
        u"\xee": '&#238;', u"\xef": '&#239;', u"\xf0": '&#240;', u"\xf1": '&#241;', u"\xf2": '&#242;',
        u"\xf3": '&#243;',
        u"\xf4": '&#244;', u"\xf5": '&#245;', u"\xf6": '&#246;', u"\xf7": '&#247;', u"\xf8": '&#248;',
        u"\xf9": '&#249;',
        u"\xfa": '&#250;', u"\xfb": '&#251;', u"\xfc": '&#252;', u"\xfd": '&#253;', u"\xfe": '&#254;',
        u"\xff": '&#255;',
        # html translation table ISO-8859-2 | tosiek - http://tosiek.pl/
        u"\xa0": '&#160;', u"\xa1": '&#260;', u"\xa2": '&#728;', u"\xa3": '&#321;', u"\xa4": '&#164;',
        u"\xa5": '&#317;',
        u"\xa6": '&#346;', u"\xa7": '&#167;', u"\xa8": '&#168;', u"\xa9": '&#352;', u"\xaa": '&#350;',
        u"\xab": '&#356;',
        u"\xac": '&#377;', u"\xad": '&#173;', u"\xae": '&#381;', u"\xaf": '&#379;', u"\xb0": '&#176;',
        u"\xb1": '&#261;',
        u"\xb2": '&#731;', u"\xb3": '&#322;', u"\xb4": '&#180;', u"\xb5": '&#318;', u"\xb6": '&#347;',
        u"\xb7": '&#711;',
        u"\xb8": '&#184;', u"\xb9": '&#353;', u"\xba": '&#351;', u"\xbb": '&#357;', u"\xbc": '&#378;',
        u"\xbd": '&#733;',
        u"\xbe": '&#382;', u"\xbf": '&#380;', u"\xc0": '&#340;', u"\xc1": '&#193;', u"\xc2": '&#194;',
        u"\xc3": '&#258;',
        u"\xc4": '&#196;', u"\xc5": '&#313;', u"\xc6": '&#262;', u"\xc7": '&#199;', u"\xc8": '&#268;',
        u"\xc9": '&#201;',
        u"\xca": '&#280;', u"\xcb": '&#203;', u"\xcc": '&#282;', u"\xcd": '&#205;', u"\xce": '&#206;',
        u"\xcf": '&#270;',
        u"\xd0": '&#272;', u"\xd1": '&#323;', u"\xd2": '&#327;', u"\xd3": '&#211;', u"\xd4": '&#212;',
        u"\xd5": '&#336;',
        u"\xd6": '&#214;', u"\xd7": '&#215;', u"\xd8": '&#344;', u"\xd9": '&#366;', u"\xda": '&#218;',
        u"\xdb": '&#368;',
        u"\xdc": '&#220;', u"\xdd": '&#221;', u"\xde": '&#354;', u"\xdf": '&#223;', u"\xe0": '&#341;',
        u"\xe1": '&#225;',
        u"\xe2": '&#226;', u"\xe3": '&#259;', u"\xe4": '&#228;', u"\xe5": '&#314;', u"\xe6": '&#263;',
        u"\xe7": '&#231;',
        u"\xe8": '&#269;', u"\xe9": '&#233;', u"\xea": '&#281;', u"\xeb": '&#235;', u"\xec": '&#283;',
        u"\xed": '&#237;',
        u"\xee": '&#238;', u"\xef": '&#271;', u"\xf0": '&#273;', u"\xf1": '&#324;', u"\xf2": '&#328;',
        u"\xf3": '&#243;',
        u"\xf4": '&#244;', u"\xf5": '&#337;', u"\xf6": '&#246;', u"\xf7": '&#247;', u"\xf8": '&#345;',
        u"\xf9": '&#367;',
        u"\xfa": '&#250;', u"\xfb": '&#369;', u"\xfc": '&#252;', u"\xfd": '&#253;', u"\xfe": '&#355;',
        u"\xff": '&#729;',
        # html translation table ISO-8859-3 | tosiek - http://tosiek.pl/
        u"\xa0": '&#160;', u"\xa1": '&#294;', u"\xa2": '&#728;', u"\xa3": '&#163;', u"\xa4": '&#164;',
        u"\xa6": '&#292;',
        u"\xa7": '&#167;', u"\xa8": '&#168;', u"\xa9": '&#304;', u"\xaa": '&#350;', u"\xab": '&#286;',
        u"\xac": '&#308;',
        u"\xad": '&#173;', u"\xaf": '&#379;', u"\xb0": '&#176;', u"\xb1": '&#295;', u"\xb2": '&#178;',
        u"\xb3": '&#179;',
        u"\xb4": '&#180;', u"\xb5": '&#181;', u"\xb6": '&#293;', u"\xb7": '&#183;', u"\xb8": '&#184;',
        u"\xb9": '&#305;',
        u"\xba": '&#351;', u"\xbb": '&#287;', u"\xbc": '&#309;', u"\xbd": '&#189;', u"\xbf": '&#380;',
        u"\xc0": '&#192;',
        u"\xc1": '&#193;', u"\xc2": '&#194;', u"\xc4": '&#196;', u"\xc5": '&#266;', u"\xc6": '&#264;',
        u"\xc7": '&#199;',
        u"\xc8": '&#200;', u"\xc9": '&#201;', u"\xca": '&#202;', u"\xcb": '&#203;', u"\xcc": '&#204;',
        u"\xcd": '&#205;',
        u"\xce": '&#206;', u"\xcf": '&#207;', u"\xd1": '&#209;', u"\xd2": '&#210;', u"\xd3": '&#211;',
        u"\xd4": '&#212;',
        u"\xd5": '&#288;', u"\xd6": '&#214;', u"\xd7": '&#215;', u"\xd8": '&#284;', u"\xd9": '&#217;',
        u"\xda": '&#218;',
        u"\xdb": '&#219;', u"\xdc": '&#220;', u"\xdd": '&#364;', u"\xde": '&#348;', u"\xdf": '&#223;',
        u"\xe0": '&#224;',
        u"\xe1": '&#225;', u"\xe2": '&#226;', u"\xe4": '&#228;', u"\xe5": '&#267;', u"\xe6": '&#265;',
        u"\xe7": '&#231;',
        u"\xe8": '&#232;', u"\xe9": '&#233;', u"\xea": '&#234;', u"\xeb": '&#235;', u"\xec": '&#236;',
        u"\xed": '&#237;',
        u"\xee": '&#238;', u"\xef": '&#239;', u"\xf1": '&#241;', u"\xf2": '&#242;', u"\xf3": '&#243;',
        u"\xf4": '&#244;',
        u"\xf5": '&#289;', u"\xf6": '&#246;', u"\xf7": '&#247;', u"\xf8": '&#285;', u"\xf9": '&#249;',
        u"\xfa": '&#250;',
        u"\xfb": '&#251;', u"\xfc": '&#252;', u"\xfd": '&#365;', u"\xfe": '&#349;', u"\xff": '&#729;',
        # html translation table ISO-8859-4 | tosiek - http://tosiek.pl/
        u"\xa0": '&#160;', u"\xa1": '&#260;', u"\xa2": '&#312;', u"\xa3": '&#342;', u"\xa4": '&#164;',
        u"\xa5": '&#296;',
        u"\xa6": '&#315;', u"\xa7": '&#167;', u"\xa8": '&#168;', u"\xa9": '&#352;', u"\xaa": '&#274;',
        u"\xab": '&#290;',
        u"\xac": '&#358;', u"\xad": '&#173;', u"\xae": '&#381;', u"\xaf": '&#175;', u"\xb0": '&#176;',
        u"\xb1": '&#261;',
        u"\xb2": '&#731;', u"\xb3": '&#343;', u"\xb4": '&#180;', u"\xb5": '&#297;', u"\xb6": '&#316;',
        u"\xb7": '&#711;',
        u"\xb8": '&#184;', u"\xb9": '&#353;', u"\xba": '&#275;', u"\xbb": '&#291;', u"\xbc": '&#359;',
        u"\xbd": '&#330;',
        u"\xbe": '&#382;', u"\xbf": '&#331;', u"\xc0": '&#256;', u"\xc1": '&#193;', u"\xc2": '&#194;',
        u"\xc3": '&#195;',
        u"\xc4": '&#196;', u"\xc5": '&#197;', u"\xc6": '&#198;', u"\xc7": '&#302;', u"\xc8": '&#268;',
        u"\xc9": '&#201;',
        u"\xca": '&#280;', u"\xcb": '&#203;', u"\xcc": '&#278;', u"\xcd": '&#205;', u"\xce": '&#206;',
        u"\xcf": '&#298;',
        u"\xd0": '&#272;', u"\xd1": '&#325;', u"\xd2": '&#332;', u"\xd3": '&#310;', u"\xd4": '&#212;',
        u"\xd5": '&#213;',
        u"\xd6": '&#214;', u"\xd7": '&#215;', u"\xd8": '&#216;', u"\xd9": '&#370;', u"\xda": '&#218;',
        u"\xdb": '&#219;',
        u"\xdc": '&#220;', u"\xdd": '&#360;', u"\xde": '&#362;', u"\xdf": '&#223;', u"\xe0": '&#257;',
        u"\xe1": '&#225;',
        u"\xe2": '&#226;', u"\xe3": '&#227;', u"\xe4": '&#228;', u"\xe5": '&#229;', u"\xe6": '&#230;',
        u"\xe7": '&#303;',
        u"\xe8": '&#269;', u"\xe9": '&#233;', u"\xea": '&#281;', u"\xeb": '&#235;', u"\xec": '&#279;',
        u"\xed": '&#237;',
        u"\xee": '&#238;', u"\xef": '&#299;', u"\xf0": '&#273;', u"\xf1": '&#326;', u"\xf2": '&#333;',
        u"\xf3": '&#311;',
        u"\xf4": '&#244;', u"\xf5": '&#245;', u"\xf6": '&#246;', u"\xf7": '&#247;', u"\xf8": '&#248;',
        u"\xf9": '&#371;',
        u"\xfa": '&#250;', u"\xfb": '&#251;', u"\xfc": '&#252;', u"\xfd": '&#361;', u"\xfe": '&#363;',
        u"\xff": '&#729;',
        # html translation table ISO-8859-5 | tosiek - http://tosiek.pl/
        u"\xa0": '&#160;', u"\xa1": '&#1025;', u"\xa2": '&#1026;', u"\xa3": '&#1027;', u"\xa4": '&#1028;',
        u"\xa5": '&#1029;',
        u"\xa6": '&#1030;', u"\xa7": '&#1031;', u"\xa8": '&#1032;', u"\xa9": '&#1033;', u"\xaa": '&#1034;',
        u"\xab": '&#1035;',
        u"\xac": '&#1036;', u"\xad": '&#173;', u"\xae": '&#1038;', u"\xaf": '&#1039;', u"\xb0": '&#1040;',
        u"\xb1": '&#1041;',
        u"\xb2": '&#1042;', u"\xb3": '&#1043;', u"\xb4": '&#1044;', u"\xb5": '&#1045;', u"\xb6": '&#1046;',
        u"\xb7": '&#1047;',
        u"\xb8": '&#1048;', u"\xb9": '&#1049;', u"\xba": '&#1050;', u"\xbb": '&#1051;', u"\xbc": '&#1052;',
        u"\xbd": '&#1053;',
        u"\xbe": '&#1054;', u"\xbf": '&#1055;', u"\xc0": '&#1056;', u"\xc1": '&#1057;', u"\xc2": '&#1058;',
        u"\xc3": '&#1059;',
        u"\xc4": '&#1060;', u"\xc5": '&#1061;', u"\xc6": '&#1062;', u"\xc7": '&#1063;', u"\xc8": '&#1064;',
        u"\xc9": '&#1065;',
        u"\xca": '&#1066;', u"\xcb": '&#1067;', u"\xcc": '&#1068;', u"\xcd": '&#1069;', u"\xce": '&#1070;',
        u"\xcf": '&#1071;',
        u"\xd0": '&#1072;', u"\xd1": '&#1073;', u"\xd2": '&#1074;', u"\xd3": '&#1075;', u"\xd4": '&#1076;',
        u"\xd5": '&#1077;',
        u"\xd6": '&#1078;', u"\xd7": '&#1079;', u"\xd8": '&#1080;', u"\xd9": '&#1081;', u"\xda": '&#1082;',
        u"\xdb": '&#1083;',
        u"\xdc": '&#1084;', u"\xdd": '&#1085;', u"\xde": '&#1086;', u"\xdf": '&#1087;', u"\xe0": '&#1088;',
        u"\xe1": '&#1089;',
        u"\xe2": '&#1090;', u"\xe3": '&#1091;', u"\xe4": '&#1092;', u"\xe5": '&#1093;', u"\xe6": '&#1094;',
        u"\xe7": '&#1095;',
        u"\xe8": '&#1096;', u"\xe9": '&#1097;', u"\xea": '&#1098;', u"\xeb": '&#1099;', u"\xec": '&#1100;',
        u"\xed": '&#1101;',
        u"\xee": '&#1102;', u"\xef": '&#1103;', u"\xf0": '&#8470;', u"\xf1": '&#1105;', u"\xf2": '&#1106;',
        u"\xf3": '&#1107;',
        u"\xf4": '&#1108;', u"\xf5": '&#1109;', u"\xf6": '&#1110;', u"\xf7": '&#1111;', u"\xf8": '&#1112;',
        u"\xf9": '&#1113;',
        u"\xfa": '&#1114;', u"\xfb": '&#1115;', u"\xfc": '&#1116;', u"\xfd": '&#167;', u"\xfe": '&#1118;',
        u"\xff": '&#1119;',
        # html translation table ISO-8859-6 | tosiek - http://tosiek.pl/
        u"\xa0": '&#160;', u"\xa4": '&#164;', u"\xac": '&#1548;', u"\xad": '&#173;', u"\xbb": '&#1563;',
        u"\xbf": '&#1567;',
        u"\xc1": '&#1569;', u"\xc2": '&#1570;', u"\xc3": '&#1571;', u"\xc4": '&#1572;', u"\xc5": '&#1573;',
        u"\xc6": '&#1574;',
        u"\xc7": '&#1575;', u"\xc8": '&#1576;', u"\xc9": '&#1577;', u"\xca": '&#1578;', u"\xcb": '&#1579;',
        u"\xcc": '&#1580;',
        u"\xcd": '&#1581;', u"\xce": '&#1582;', u"\xcf": '&#1583;', u"\xd0": '&#1584;', u"\xd1": '&#1585;',
        u"\xd2": '&#1586;',
        u"\xd3": '&#1587;', u"\xd4": '&#1588;', u"\xd5": '&#1589;', u"\xd6": '&#1590;', u"\xd7": '&#1591;',
        u"\xd8": '&#1592;',
        u"\xd9": '&#1593;', u"\xda": '&#1594;', u"\xe0": '&#1600;', u"\xe1": '&#1601;', u"\xe2": '&#1602;',
        u"\xe3": '&#1603;',
        u"\xe4": '&#1604;', u"\xe5": '&#1605;', u"\xe6": '&#1606;', u"\xe7": '&#1607;', u"\xe8": '&#1608;',
        u"\xe9": '&#1609;',
        u"\xea": '&#1610;', u"\xeb": '&#1611;', u"\xec": '&#1612;', u"\xed": '&#1613;', u"\xee": '&#1614;',
        u"\xef": '&#1615;',
        u"\xf0": '&#1616;', u"\xf1": '&#1617;', u"\xf2": '&#1618;',
        # html translation table ISO-8859-7 | tosiek - http://tosiek.pl/
        u"\xa0": '&#160;', u"\xa1": '&#8216;', u"\xa2": '&#8217;', u"\xa3": '&#163;', u"\xa4": '&#8364;',
        u"\xa5": '&#8367;',
        u"\xa6": '&#166;', u"\xa7": '&#167;', u"\xa8": '&#168;', u"\xa9": '&#169;', u"\xaa": '&#890;',
        u"\xab": '&#171;',
        u"\xac": '&#172;', u"\xad": '&#173;', u"\xaf": '&#8213;', u"\xb0": '&#176;', u"\xb1": '&#177;',
        u"\xb2": '&#178;',
        u"\xb3": '&#179;', u"\xb4": '&#900;', u"\xb5": '&#901;', u"\xb6": '&#902;', u"\xb7": '&#183;',
        u"\xb8": '&#904;',
        u"\xb9": '&#905;', u"\xba": '&#906;', u"\xbb": '&#187;', u"\xbc": '&#908;', u"\xbd": '&#189;',
        u"\xbe": '&#910;',
        u"\xbf": '&#911;', u"\xc0": '&#912;', u"\xc1": '&#913;', u"\xc2": '&#914;', u"\xc3": '&#915;',
        u"\xc4": '&#916;',
        u"\xc5": '&#917;', u"\xc6": '&#918;', u"\xc7": '&#919;', u"\xc8": '&#920;', u"\xc9": '&#921;',
        u"\xca": '&#922;',
        u"\xcb": '&#923;', u"\xcc": '&#924;', u"\xcd": '&#925;', u"\xce": '&#926;', u"\xcf": '&#927;',
        u"\xd0": '&#928;',
        u"\xd1": '&#929;', u"\xd3": '&#931;', u"\xd4": '&#932;', u"\xd5": '&#933;', u"\xd6": '&#934;',
        u"\xd7": '&#935;',
        u"\xd8": '&#936;', u"\xd9": '&#937;', u"\xda": '&#938;', u"\xdb": '&#939;', u"\xdc": '&#940;',
        u"\xdd": '&#941;',
        u"\xde": '&#942;', u"\xdf": '&#943;', u"\xe0": '&#944;', u"\xe1": '&#945;', u"\xe2": '&#946;',
        u"\xe3": '&#947;',
        u"\xe4": '&#948;', u"\xe5": '&#949;', u"\xe6": '&#950;', u"\xe7": '&#951;', u"\xe8": '&#952;',
        u"\xe9": '&#953;',
        u"\xea": '&#954;', u"\xeb": '&#955;', u"\xec": '&#956;', u"\xed": '&#957;', u"\xee": '&#958;',
        u"\xef": '&#959;',
        u"\xf0": '&#960;', u"\xf1": '&#961;', u"\xf2": '&#962;', u"\xf3": '&#963;', u"\xf4": '&#964;',
        u"\xf5": '&#965;',
        u"\xf6": '&#966;', u"\xf7": '&#967;', u"\xf8": '&#968;', u"\xf9": '&#969;', u"\xfa": '&#970;',
        u"\xfb": '&#971;',
        u"\xfc": '&#972;', u"\xfd": '&#973;', u"\xfe": '&#974;',
        # html translation table ISO-8859-8 | tosiek - http://tosiek.pl/
        u"\xa0": '&#160;', u"\xa2": '&#162;', u"\xa3": '&#163;', u"\xa4": '&#164;', u"\xa5": '&#165;',
        u"\xa6": '&#166;',
        u"\xa7": '&#167;', u"\xa8": '&#168;', u"\xa9": '&#169;', u"\xaa": '&#215;', u"\xab": '&#171;',
        u"\xac": '&#172;',
        u"\xad": '&#173;', u"\xae": '&#174;', u"\xaf": '&#175;', u"\xb0": '&#176;', u"\xb1": '&#177;',
        u"\xb2": '&#178;',
        u"\xb3": '&#179;', u"\xb4": '&#180;', u"\xb5": '&#181;', u"\xb6": '&#182;', u"\xb7": '&#183;',
        u"\xb8": '&#184;',
        u"\xb9": '&#185;', u"\xba": '&#247;', u"\xbb": '&#187;', u"\xbc": '&#188;', u"\xbd": '&#189;',
        u"\xbe": '&#190;',
        u"\xdf": '&#8215;', u"\xe0": '&#1488;', u"\xe1": '&#1489;', u"\xe2": '&#1490;', u"\xe3": '&#1491;',
        u"\xe4": '&#1492;',
        u"\xe5": '&#1493;', u"\xe6": '&#1494;', u"\xe7": '&#1495;', u"\xe8": '&#1496;', u"\xe9": '&#1497;',
        u"\xea": '&#1498;',
        u"\xeb": '&#1499;', u"\xec": '&#1500;', u"\xed": '&#1501;', u"\xee": '&#1502;', u"\xef": '&#1503;',
        u"\xf0": '&#1504;',
        u"\xf1": '&#1505;', u"\xf2": '&#1506;', u"\xf3": '&#1507;', u"\xf4": '&#1508;', u"\xf5": '&#1509;',
        u"\xf6": '&#1510;',
        u"\xf7": '&#1511;', u"\xf8": '&#1512;', u"\xf9": '&#1513;', u"\xfa": '&#1514;', u"\xfd": '&#8206;',
        u"\xfe": '&#8207;',
        # html translation table ISO-8859-9 | tosiek - http://tosiek.pl/
        u"\xa0": '&#160;', u"\xa1": '&#161;', u"\xa2": '&#162;', u"\xa3": '&#163;', u"\xa4": '&#164;',
        u"\xa5": '&#165;',
        u"\xa6": '&#166;', u"\xa7": '&#167;', u"\xa8": '&#168;', u"\xa9": '&#169;', u"\xaa": '&#170;',
        u"\xab": '&#171;',
        u"\xac": '&#172;', u"\xad": '&#173;', u"\xae": '&#174;', u"\xaf": '&#175;', u"\xb0": '&#176;',
        u"\xb1": '&#177;',
        u"\xb2": '&#178;', u"\xb3": '&#179;', u"\xb4": '&#180;', u"\xb5": '&#181;', u"\xb6": '&#182;',
        u"\xb7": '&#183;',
        u"\xb8": '&#184;', u"\xb9": '&#185;', u"\xba": '&#186;', u"\xbb": '&#187;', u"\xbc": '&#188;',
        u"\xbd": '&#189;',
        u"\xbe": '&#190;', u"\xbf": '&#191;', u"\xc0": '&#192;', u"\xc1": '&#193;', u"\xc2": '&#194;',
        u"\xc3": '&#195;',
        u"\xc4": '&#196;', u"\xc5": '&#197;', u"\xc6": '&#198;', u"\xc7": '&#199;', u"\xc8": '&#200;',
        u"\xc9": '&#201;',
        u"\xca": '&#202;', u"\xcb": '&#203;', u"\xcc": '&#204;', u"\xcd": '&#205;', u"\xce": '&#206;',
        u"\xcf": '&#207;',
        u"\xd0": '&#286;', u"\xd1": '&#209;', u"\xd2": '&#210;', u"\xd3": '&#211;', u"\xd4": '&#212;',
        u"\xd5": '&#213;',
        u"\xd6": '&#214;', u"\xd7": '&#215;', u"\xd8": '&#216;', u"\xd9": '&#217;', u"\xda": '&#218;',
        u"\xdb": '&#219;',
        u"\xdc": '&#220;', u"\xdd": '&#304;', u"\xde": '&#350;', u"\xdf": '&#223;', u"\xe0": '&#224;',
        u"\xe1": '&#225;',
        u"\xe2": '&#226;', u"\xe3": '&#227;', u"\xe4": '&#228;', u"\xe5": '&#229;', u"\xe6": '&#230;',
        u"\xe7": '&#231;',
        u"\xe8": '&#232;', u"\xe9": '&#233;', u"\xea": '&#234;', u"\xeb": '&#235;', u"\xec": '&#236;',
        u"\xed": '&#237;',
        u"\xee": '&#238;', u"\xef": '&#239;', u"\xf0": '&#287;', u"\xf1": '&#241;', u"\xf2": '&#242;',
        u"\xf3": '&#243;',
        u"\xf4": '&#244;', u"\xf5": '&#245;', u"\xf6": '&#246;', u"\xf7": '&#247;', u"\xf8": '&#248;',
        u"\xf9": '&#249;',
        u"\xfa": '&#250;', u"\xfb": '&#251;', u"\xfc": '&#252;', u"\xfd": '&#305;', u"\xfe": '&#351;',
        u"\xff": '&#255;',
        # html translation table ISO-8859-10 | tosiek - http://tosiek.pl/
        u"\xa0": '&#160;', u"\xa1": '&#260;', u"\xa2": '&#274;', u"\xa3": '&#290;', u"\xa4": '&#298;',
        u"\xa5": '&#296;',
        u"\xa6": '&#310;', u"\xa7": '&#167;', u"\xa8": '&#315;', u"\xa9": '&#272;', u"\xaa": '&#352;',
        u"\xab": '&#358;',
        u"\xac": '&#381;', u"\xad": '&#173;', u"\xae": '&#362;', u"\xaf": '&#330;', u"\xb0": '&#176;',
        u"\xb1": '&#261;',
        u"\xb2": '&#275;', u"\xb3": '&#291;', u"\xb4": '&#299;', u"\xb5": '&#297;', u"\xb6": '&#311;',
        u"\xb7": '&#183;',
        u"\xb8": '&#316;', u"\xb9": '&#273;', u"\xba": '&#353;', u"\xbb": '&#359;', u"\xbc": '&#382;',
        u"\xbd": '&#8213;',
        u"\xbe": '&#363;', u"\xbf": '&#331;', u"\xc0": '&#256;', u"\xc1": '&#193;', u"\xc2": '&#194;',
        u"\xc3": '&#195;',
        u"\xc4": '&#196;', u"\xc5": '&#197;', u"\xc6": '&#198;', u"\xc7": '&#302;', u"\xc8": '&#268;',
        u"\xc9": '&#201;',
        u"\xca": '&#280;', u"\xcb": '&#203;', u"\xcc": '&#278;', u"\xcd": '&#205;', u"\xce": '&#206;',
        u"\xcf": '&#207;',
        u"\xd0": '&#208;', u"\xd1": '&#325;', u"\xd2": '&#332;', u"\xd3": '&#211;', u"\xd4": '&#212;',
        u"\xd5": '&#213;',
        u"\xd6": '&#214;', u"\xd7": '&#360;', u"\xd8": '&#216;', u"\xd9": '&#370;', u"\xda": '&#218;',
        u"\xdb": '&#219;',
        u"\xdc": '&#220;', u"\xdd": '&#221;', u"\xde": '&#222;', u"\xdf": '&#223;', u"\xe0": '&#257;',
        u"\xe1": '&#225;',
        u"\xe2": '&#226;', u"\xe3": '&#227;', u"\xe4": '&#228;', u"\xe5": '&#229;', u"\xe6": '&#230;',
        u"\xe7": '&#303;',
        u"\xe8": '&#269;', u"\xe9": '&#233;', u"\xea": '&#281;', u"\xeb": '&#235;', u"\xec": '&#279;',
        u"\xed": '&#237;',
        u"\xee": '&#238;', u"\xef": '&#239;', u"\xf0": '&#240;', u"\xf1": '&#326;', u"\xf2": '&#333;',
        u"\xf3": '&#243;',
        u"\xf4": '&#244;', u"\xf5": '&#245;', u"\xf6": '&#246;', u"\xf7": '&#361;', u"\xf8": '&#248;',
        u"\xf9": '&#371;',
        u"\xfa": '&#250;', u"\xfb": '&#251;', u"\xfc": '&#252;', u"\xfd": '&#253;', u"\xfe": '&#254;',
        u"\xff": '&#312;',
        # html translation table ISO-8859-11 | tosiek - http://tosiek.pl/
        u"\xa0": '&#160;', u"\xa1": '&#3585;', u"\xa2": '&#3586;', u"\xa3": '&#3587;', u"\xa4": '&#3588;',
        u"\xa5": '&#3589;',
        u"\xa6": '&#3590;', u"\xa7": '&#3591;', u"\xa8": '&#3592;', u"\xa9": '&#3593;', u"\xaa": '&#3594;',
        u"\xab": '&#3595;',
        u"\xac": '&#3596;', u"\xad": '&#3597;', u"\xae": '&#3598;', u"\xaf": '&#3599;', u"\xb0": '&#3600;',
        u"\xb1": '&#3601;',
        u"\xb2": '&#3602;', u"\xb3": '&#3603;', u"\xb4": '&#3604;', u"\xb5": '&#3605;', u"\xb6": '&#3606;',
        u"\xb7": '&#3607;',
        u"\xb8": '&#3608;', u"\xb9": '&#3609;', u"\xba": '&#3610;', u"\xbb": '&#3611;', u"\xbc": '&#3612;',
        u"\xbd": '&#3613;',
        u"\xbe": '&#3614;', u"\xbf": '&#3615;', u"\xc0": '&#3616;', u"\xc1": '&#3617;', u"\xc2": '&#3618;',
        u"\xc3": '&#3619;',
        u"\xc4": '&#3620;', u"\xc5": '&#3621;', u"\xc6": '&#3622;', u"\xc7": '&#3623;', u"\xc8": '&#3624;',
        u"\xc9": '&#3625;',
        u"\xca": '&#3626;', u"\xcb": '&#3627;', u"\xcc": '&#3628;', u"\xcd": '&#3629;', u"\xce": '&#3630;',
        u"\xcf": '&#3631;',
        u"\xd0": '&#3632;', u"\xd1": '&#3633;', u"\xd2": '&#3634;', u"\xd3": '&#3635;', u"\xd4": '&#3636;',
        u"\xd5": '&#3637;',
        u"\xd6": '&#3638;', u"\xd7": '&#3639;', u"\xd8": '&#3640;', u"\xd9": '&#3641;', u"\xda": '&#3642;',
        u"\xdf": '&#3647;',
        u"\xe0": '&#3648;', u"\xe1": '&#3649;', u"\xe2": '&#3650;', u"\xe3": '&#3651;', u"\xe4": '&#3652;',
        u"\xe5": '&#3653;',
        u"\xe6": '&#3654;', u"\xe7": '&#3655;', u"\xe8": '&#3656;', u"\xe9": '&#3657;', u"\xea": '&#3658;',
        u"\xeb": '&#3659;',
        u"\xec": '&#3660;', u"\xed": '&#3661;', u"\xee": '&#3662;', u"\xef": '&#3663;', u"\xf0": '&#3664;',
        u"\xf1": '&#3665;',
        u"\xf2": '&#3666;', u"\xf3": '&#3667;', u"\xf4": '&#3668;', u"\xf5": '&#3669;', u"\xf6": '&#3670;',
        u"\xf7": '&#3671;',
        u"\xf8": '&#3672;', u"\xf9": '&#3673;', u"\xfa": '&#3674;', u"\xfb": '&#3675;',
        # html translation table ISO-8859-13 | tosiek - http://tosiek.pl/
        u"\xa0": '&#160;', u"\xa1": '&#8221;', u"\xa2": '&#162;', u"\xa3": '&#163;', u"\xa4": '&#164;',
        u"\xa5": '&#8222;',
        u"\xa6": '&#166;', u"\xa7": '&#167;', u"\xa8": '&#216;', u"\xa9": '&#169;', u"\xaa": '&#342;',
        u"\xab": '&#171;',
        u"\xac": '&#172;', u"\xad": '&#173;', u"\xae": '&#174;', u"\xaf": '&#198;', u"\xb0": '&#176;',
        u"\xb1": '&#177;',
        u"\xb2": '&#178;', u"\xb3": '&#179;', u"\xb4": '&#8220;', u"\xb5": '&#181;', u"\xb6": '&#182;',
        u"\xb7": '&#183;',
        u"\xb8": '&#248;', u"\xb9": '&#185;', u"\xba": '&#343;', u"\xbb": '&#187;', u"\xbc": '&#188;',
        u"\xbd": '&#189;',
        u"\xbe": '&#190;', u"\xbf": '&#230;', u"\xc0": '&#260;', u"\xc1": '&#302;', u"\xc2": '&#256;',
        u"\xc3": '&#262;',
        u"\xc4": '&#196;', u"\xc5": '&#197;', u"\xc6": '&#280;', u"\xc7": '&#274;', u"\xc8": '&#268;',
        u"\xc9": '&#201;',
        u"\xca": '&#377;', u"\xcb": '&#278;', u"\xcc": '&#290;', u"\xcd": '&#310;', u"\xce": '&#298;',
        u"\xcf": '&#315;',
        u"\xd0": '&#352;', u"\xd1": '&#323;', u"\xd2": '&#325;', u"\xd3": '&#211;', u"\xd4": '&#332;',
        u"\xd5": '&#213;',
        u"\xd6": '&#214;', u"\xd7": '&#215;', u"\xd8": '&#370;', u"\xd9": '&#321;', u"\xda": '&#346;',
        u"\xdb": '&#362;',
        u"\xdc": '&#220;', u"\xdd": '&#379;', u"\xde": '&#381;', u"\xdf": '&#223;', u"\xe0": '&#261;',
        u"\xe1": '&#303;',
        u"\xe2": '&#257;', u"\xe3": '&#263;', u"\xe4": '&#228;', u"\xe5": '&#229;', u"\xe6": '&#281;',
        u"\xe7": '&#275;',
        u"\xe8": '&#269;', u"\xe9": '&#233;', u"\xea": '&#378;', u"\xeb": '&#279;', u"\xec": '&#291;',
        u"\xed": '&#311;',
        u"\xee": '&#299;', u"\xef": '&#316;', u"\xf0": '&#353;', u"\xf1": '&#324;', u"\xf2": '&#326;',
        u"\xf3": '&#243;',
        u"\xf4": '&#333;', u"\xf5": '&#245;', u"\xf6": '&#246;', u"\xf7": '&#247;', u"\xf8": '&#371;',
        u"\xf9": '&#322;',
        u"\xfa": '&#347;', u"\xfb": '&#363;', u"\xfc": '&#252;', u"\xfd": '&#380;', u"\xfe": '&#382;',
        u"\xff": '&#8217;',
        # html translation table ISO-8859-14 | tosiek - http://tosiek.pl/
        u"\xa0": '&#160;', u"\xa1": '&#7682;', u"\xa2": '&#7683;', u"\xa3": '&#163;', u"\xa4": '&#266;',
        u"\xa5": '&#267;',
        u"\xa6": '&#7690;', u"\xa7": '&#167;', u"\xa8": '&#7808;', u"\xa9": '&#169;', u"\xaa": '&#7810;',
        u"\xab": '&#7691;',
        u"\xac": '&#7922;', u"\xad": '&#173;', u"\xae": '&#174;', u"\xaf": '&#376;', u"\xb0": '&#7710;',
        u"\xb1": '&#7711;',
        u"\xb2": '&#288;', u"\xb3": '&#289;', u"\xb4": '&#7744;', u"\xb5": '&#7745;', u"\xb6": '&#182;',
        u"\xb7": '&#7766;',
        u"\xb8": '&#7809;', u"\xb9": '&#7767;', u"\xba": '&#7811;', u"\xbb": '&#7776;', u"\xbc": '&#7923;',
        u"\xbd": '&#7812;',
        u"\xbe": '&#7813;', u"\xbf": '&#7777;', u"\xc0": '&#192;', u"\xc1": '&#193;', u"\xc2": '&#194;',
        u"\xc3": '&#195;',
        u"\xc4": '&#196;', u"\xc5": '&#197;', u"\xc6": '&#198;', u"\xc7": '&#199;', u"\xc8": '&#200;',
        u"\xc9": '&#201;',
        u"\xca": '&#202;', u"\xcb": '&#203;', u"\xcc": '&#204;', u"\xcd": '&#205;', u"\xce": '&#206;',
        u"\xcf": '&#207;',
        u"\xd0": '&#372;', u"\xd1": '&#209;', u"\xd2": '&#210;', u"\xd3": '&#211;', u"\xd4": '&#212;',
        u"\xd5": '&#213;',
        u"\xd6": '&#214;', u"\xd7": '&#7786;', u"\xd8": '&#216;', u"\xd9": '&#217;', u"\xda": '&#218;',
        u"\xdb": '&#219;',
        u"\xdc": '&#220;', u"\xdd": '&#221;', u"\xde": '&#374;', u"\xdf": '&#223;', u"\xe0": '&#224;',
        u"\xe1": '&#225;',
        u"\xe2": '&#226;', u"\xe3": '&#227;', u"\xe4": '&#228;', u"\xe5": '&#229;', u"\xe6": '&#230;',
        u"\xe7": '&#231;',
        u"\xe8": '&#232;', u"\xe9": '&#233;', u"\xea": '&#234;', u"\xeb": '&#235;', u"\xec": '&#236;',
        u"\xed": '&#237;',
        u"\xee": '&#238;', u"\xef": '&#239;', u"\xf0": '&#373;', u"\xf1": '&#241;', u"\xf2": '&#242;',
        u"\xf3": '&#243;',
        u"\xf4": '&#244;', u"\xf5": '&#245;', u"\xf6": '&#246;', u"\xf7": '&#7787;', u"\xf8": '&#248;',
        u"\xf9": '&#249;',
        u"\xfa": '&#250;', u"\xfb": '&#251;', u"\xfc": '&#252;', u"\xfd": '&#253;', u"\xfe": '&#375;',
        u"\xff": '&#255;',
        # html translation table ISO-8859-15 | tosiek - http://tosiek.pl/
        u"\xa0": '&#160;', u"\xa1": '&#161;', u"\xa2": '&#162;', u"\xa3": '&#163;', u"\xa4": '&#8364;',
        u"\xa5": '&#165;',
        u"\xa6": '&#352;', u"\xa7": '&#167;', u"\xa8": '&#353;', u"\xa9": '&#169;', u"\xaa": '&#170;',
        u"\xab": '&#171;',
        u"\xac": '&#172;', u"\xad": '&#173;', u"\xae": '&#174;', u"\xaf": '&#175;', u"\xb0": '&#176;',
        u"\xb1": '&#177;',
        u"\xb2": '&#178;', u"\xb3": '&#179;', u"\xb4": '&#381;', u"\xb5": '&#181;', u"\xb6": '&#182;',
        u"\xb7": '&#183;',
        u"\xb8": '&#382;', u"\xb9": '&#185;', u"\xba": '&#186;', u"\xbb": '&#187;', u"\xbc": '&#338;',
        u"\xbd": '&#339;',
        u"\xbe": '&#376;', u"\xbf": '&#191;', u"\xc0": '&#192;', u"\xc1": '&#193;', u"\xc2": '&#194;',
        u"\xc3": '&#195;',
        u"\xc4": '&#196;', u"\xc5": '&#197;', u"\xc6": '&#198;', u"\xc7": '&#199;', u"\xc8": '&#200;',
        u"\xc9": '&#201;',
        u"\xca": '&#202;', u"\xcb": '&#203;', u"\xcc": '&#204;', u"\xcd": '&#205;', u"\xce": '&#206;',
        u"\xcf": '&#207;',
        u"\xd0": '&#208;', u"\xd1": '&#209;', u"\xd2": '&#210;', u"\xd3": '&#211;', u"\xd4": '&#212;',
        u"\xd5": '&#213;',
        u"\xd6": '&#214;', u"\xd7": '&#215;', u"\xd8": '&#216;', u"\xd9": '&#217;', u"\xda": '&#218;',
        u"\xdb": '&#219;',
        u"\xdc": '&#220;', u"\xdd": '&#221;', u"\xde": '&#222;', u"\xdf": '&#223;', u"\xe0": '&#224;',
        u"\xe1": '&#225;',
        u"\xe2": '&#226;', u"\xe3": '&#227;', u"\xe4": '&#228;', u"\xe5": '&#229;', u"\xe6": '&#230;',
        u"\xe7": '&#231;',
        u"\xe8": '&#232;', u"\xe9": '&#233;', u"\xea": '&#234;', u"\xeb": '&#235;', u"\xec": '&#236;',
        u"\xed": '&#237;',
        u"\xee": '&#238;', u"\xef": '&#239;', u"\xf0": '&#240;', u"\xf1": '&#241;', u"\xf2": '&#242;',
        u"\xf3": '&#243;',
        u"\xf4": '&#244;', u"\xf5": '&#245;', u"\xf6": '&#246;', u"\xf7": '&#247;', u"\xf8": '&#248;',
        u"\xf9": '&#249;',
        u"\xfa": '&#250;', u"\xfb": '&#251;', u"\xfc": '&#252;', u"\xfd": '&#253;', u"\xfe": '&#254;',
        u"\xff": '&#255;',
        # html translation table ISO-8859-16 | tosiek - http://tosiek.pl/
        u"\xa0": '&#160;', u"\xa1": '&#260;', u"\xa2": '&#261;', u"\xa3": '&#321;', u"\xa4": '&#8364;',
        u"\xa5": '&#8222;',
        u"\xa6": '&#352;', u"\xa7": '&#167;', u"\xa8": '&#353;', u"\xa9": '&#169;', u"\xaa": '&#536;',
        u"\xab": '&#171;',
        u"\xac": '&#377;', u"\xad": '&#173;', u"\xae": '&#378;', u"\xaf": '&#379;', u"\xb0": '&#176;',
        u"\xb1": '&#177;',
        u"\xb2": '&#268;', u"\xb3": '&#322;', u"\xb4": '&#381;', u"\xb5": '&#8221;', u"\xb6": '&#182;',
        u"\xb7": '&#183;',
        u"\xb8": '&#382;', u"\xb9": '&#269;', u"\xba": '&#537;', u"\xbb": '&#187;', u"\xbc": '&#338;',
        u"\xbd": '&#339;',
        u"\xbe": '&#376;', u"\xbf": '&#380;', u"\xc0": '&#192;', u"\xc1": '&#193;', u"\xc2": '&#194;',
        u"\xc3": '&#258;',
        u"\xc4": '&#196;', u"\xc5": '&#262;', u"\xc6": '&#198;', u"\xc7": '&#199;', u"\xc8": '&#200;',
        u"\xc9": '&#201;',
        u"\xca": '&#202;', u"\xcb": '&#203;', u"\xcc": '&#204;', u"\xcd": '&#205;', u"\xce": '&#206;',
        u"\xcf": '&#207;',
        u"\xd0": '&#272;', u"\xd1": '&#323;', u"\xd2": '&#210;', u"\xd3": '&#211;', u"\xd4": '&#212;',
        u"\xd5": '&#336;',
        u"\xd6": '&#214;', u"\xd7": '&#346;', u"\xd8": '&#368;', u"\xd9": '&#217;', u"\xda": '&#218;',
        u"\xdb": '&#219;',
        u"\xdc": '&#220;', u"\xdd": '&#280;', u"\xde": '&#538;', u"\xdf": '&#223;', u"\xe0": '&#224;',
        u"\xe1": '&#225;',
        u"\xe2": '&#226;', u"\xe3": '&#259;', u"\xe4": '&#228;', u"\xe5": '&#263;', u"\xe6": '&#230;',
        u"\xe7": '&#231;',
        u"\xe8": '&#232;', u"\xe9": '&#233;', u"\xea": '&#234;', u"\xeb": '&#235;', u"\xec": '&#236;',
        u"\xed": '&#237;',
        u"\xee": '&#238;', u"\xef": '&#239;', u"\xf0": '&#273;', u"\xf1": '&#324;', u"\xf2": '&#242;',
        u"\xf3": '&#243;',
        u"\xf4": '&#244;', u"\xf5": '&#337;', u"\xf6": '&#246;', u"\xf7": '&#347;', u"\xf8": '&#369;',
        u"\xf9": '&#249;',
        u"\xfa": '&#250;', u"\xfb": '&#251;', u"\xfc": '&#252;', u"\xfd": '&#281;', u"\xfe": '&#539;',
        u"\xff": '&#255;',
        # others
        u"\u0107": '&#263;', u"\u0105": '&#261;', u"\u0161": '&#353;', u"\u2764": "&#10084;", u"\ud83c": "&#55356;",
        u"\u0131": "",
        u"\udfc8": "&#57288;", u"\ud83d": "&#55357;", u"\u201c": "&#8220;", u"\U0001f340": "&#127808;",
        u"\U0001f3c8": "&#127944;",
        # punctuation
        u"\u2000": "&#8192;",
        u"\u2001": "&#8193;",
        u"\u2002": "&#8194;",
        u"\u2003": "&#8195;",
        u"\u2004": "&#8196;",
        u"\u2005": "&#8197;",
        u"\u2006": "&#8198;",
        u"\u2007": "&#8199;",
        u"\u2008": "&#8200;",
        u"\u2009": "&#8201;",
        u"\u200A": "&#8202;",
        u"\u200B": "&#8203;",
        u"\u200C": "&#8204;",
        u"\u200D": "&#8205;",
        u"\u200E": "&#8206;",
        u"\u200F": "&#8207;",
        u"\u2010": "&#8208;",
        u"\u2011": "&#8209;",
        u"\u2012": "&#8210;",
        u"\u2013": "&#8211;",
        u"\u2014": "&#8212;",
        u"\u2015": "&#8213;",
        u"\u2016": "&#8214;",
        u"\u2017": "&#8215;",
        u"\u2018": "&#8216;",
        u"\u2019": "&#8217;",
        u"\u201A": "&#8218;",
        u"\u201B": "&#8219;",
        u"\u201C": "&#8220;",
        u"\u201D": "&#8221;",
        u"\u201E": "&#8222;",
        u"\u201F": "&#8223;",
        u"\u2020": "&#8224;",
        u"\u2021": "&#8225;",
        u"\u2022": "&#8226;",
        u"\u2023": "&#8227;",
        u"\u2024": "&#8228;",
        u"\u2025": "&#8229;",
        u"\u2026": "&#8230;",
        u"\u2027": "&#8231;",
        u"\u2028": "&#8232;",
        u"\u2029": "&#8233;",
        u"\u202A": "&#8234;",
        u"\u202B": "&#8235;",
        u"\u202C": "&#8236;",
        u"\u202D": "&#8237;",
        u"\u202E": "&#8238;",
        u"\u202F": "&#8239;",
        u"\u2030": "&#8240;",
        u"\u2031": "&#8241;",
        u"\u2032": "&#8242;",
        u"\u2033": "&#8243;",
        u"\u2034": "&#8244;",
        u"\u2035": "&#8245;",
        u"\u2036": "&#8246;",
        u"\u2037": "&#8247;",
        u"\u2038": "&#8248;",
        u"\u2039": "&#8249;",
        u"\u203A": "&#8250;",
        u"\u203B": "&#8251;",
        u"\u203C": "&#8252;",
        u"\u203D": "&#8253;",
        u"\u203E": "&#8254;",
        u"\u203F": "&#8255;",
        u"\u2040": "&#8256;",
        u"\u2041": "&#8257;",
        u"\u2042": "&#8258;",
        u"\u2043": "&#8259;",
        u"\u2044": "&#8260;",
        u"\u2045": "&#8261;",
        u"\u2046": "&#8262;",
        u"\u2047": "&#8263;",
        u"\u2048": "&#8264;",
        u"\u2049": "&#8265;",
        u"\u204A": "&#8266;",
        u"\u204B": "&#8267;",
        u"\u204C": "&#8268;",
        u"\u204D": "&#8269;",
        u"\u204E": "&#8270;",
        u"\u204F": "&#8271;",
        u"\u2050": "&#8272;",
        u"\u2051": "&#8273;",
        u"\u2052": "&#8274;",
        u"\u2053": "&#8275;",
        u"\u2054": "&#8276;",
        u"\u2055": "&#8277;",
        u"\u2056": "&#8278;",
        u"\u2057": "&#8279;",
        u"\u2058": "&#8280;",
        u"\u2059": "&#8281;",
        u"\u205A": "&#8282;",
        u"\u205B": "&#8283;",
        u"\u205C": "&#8284;",
        u"\u205D": "&#8285;",
        u"\u205E": "&#8286;",
        u"\u205F": "&#8287;",
        u"\u2060": "&#8288;",
        u"\u2061": "&#8289;",
        u"\u2062": "&#8290;",
        u"\u2063": "&#8291;",
        u"\u2064": "&#8292;",
        u"\u2065": "&#8293;",
        u"\u2066": "&#8294;",
        u"\u2067": "&#8295;",
        u"\u2068": "&#8296;",
        u"\u2069": "&#8297;",
        u"\u206A": "&#8298;",
        u"\u206B": "&#8299;",
        u"\u206C": "&#8300;",
        u"\u206D": "&#8301;",
        u"\u206E": "&#8302;",
        u"\u206F": "&#8303;",
        u"\u2070": "&#8304;",
        u"\u2071": "&#8305;",
        u"\u2072": "&#8306;",
        u"\u2073": "&#8307;",
        u"\u2074": "&#8308;",
        u"\u2075": "&#8309;",
        u"\u2076": "&#8310;",
        u"\u2077": "&#8311;",
        u"\u2078": "&#8312;",
        u"\u2079": "&#8313;",
        u"\u207A": "&#8314;",
        u"\u207B": "&#8315;",
        u"\u207C": "&#8316;",
        u"\u207D": "&#8317;",
        u"\u207E": "&#8318;",
        u"\u207F": "&#8319;",
        u"\u2080": "&#8320;",
        u"\u2081": "&#8321;",
        u"\u2082": "&#8322;",
        u"\u2083": "&#8323;",
        u"\u2084": "&#8324;",
        u"\u2085": "&#8325;",
        u"\u2086": "&#8326;",
        u"\u2087": "&#8327;",
        u"\u2088": "&#8328;",
        u"\u2089": "&#8329;",
        u"\u208A": "&#8330;",
        u"\u208B": "&#8331;",
        u"\u208C": "&#8332;",
        u"\u208D": "&#8333;",
        u"\u208E": "&#8334;",
        u"\u208F": "&#8335;",
        u"\u2090": "&#8336;",
        u"\u2091": "&#8337;",
        u"\u2092": "&#8338;",
        u"\u2093": "&#8339;",
        u"\u2094": "&#8340;",
        u"\u2095": "&#8341;",
        u"\u2096": "&#8342;",
        u"\u2097": "&#8343;",
        u"\u2098": "&#8344;",
        u"\u2099": "&#8345;",
        u"\u209A": "&#8346;",
        u"\u209B": "&#8347;",
        u"\u209C": "&#8348;",
        u"\u209D": "&#8349;",
        u"\u209E": "&#8350;",
        u"\u209F": "&#8351;",
        u"\u20A0": "&#8352;",
        u"\u20A1": "&#8353;",
        u"\u20A2": "&#8354;",
        u"\u20A3": "&#8355;",
        u"\u20A4": "&#8356;",
        u"\u20A5": "&#8357;",
        u"\u20A6": "&#8358;",
        u"\u20A7": "&#8359;",
        u"\u20A8": "&#8360;",
        u"\u20A9": "&#8361;",
        u"\u20AA": "&#8362;",
        u"\u20AB": "&#8363;",
        u"\u20AC": "&#8364;",
        u"\u20AD": "&#8365;",
        u"\u20AE": "&#8366;",
        u"\u20AF": "&#8367;",
        u"\u20B0": "&#8368;",
        u"\u20B1": "&#8369;",
        u"\u20B2": "&#8370;",
        u"\u20B3": "&#8371;",
        u"\u20B4": "&#8372;",
        u"\u20B5": "&#8373;",
        u"\u20B6": "&#8374;",
        u"\u20B7": "&#8375;",
        u"\u20B8": "&#8376;",
        u"\u20B9": "&#8377;",
        u"\u20BA": "&#8378;",
        u"\u20BB": "&#8379;",
        u"\u20BC": "&#8380;",
        u"\u20BD": "&#8381;",
        u"\u20BE": "&#8382;",
        u"\u20BF": "&#8383;",
        u"\u20C0": "&#8384;",
        u"\u20C1": "&#8385;",
        u"\u20C2": "&#8386;",
        u"\u20C3": "&#8387;",
        u"\u20C4": "&#8388;",
        u"\u20C5": "&#8389;",
        u"\u20C6": "&#8390;",
        u"\u20C7": "&#8391;",
        u"\u20C8": "&#8392;",
        u"\u20C9": "&#8393;",
        u"\u20CA": "&#8394;",
        u"\u20CB": "&#8395;",
        u"\u20CC": "&#8396;",
        u"\u20CD": "&#8397;",
        u"\u20CE": "&#8398;",
        u"\u20CF": "&#8399;",
        u"\u20D0": "&#8400;",
        u"\u20D1": "&#8401;",
        u"\u20D2": "&#8402;",
        u"\u20D3": "&#8403;",
        u"\u20D4": "&#8404;",
        u"\u20D5": "&#8405;",
        u"\u20D6": "&#8406;",
        u"\u20D7": "&#8407;",
        u"\u20D8": "&#8408;",
        u"\u20D9": "&#8409;",
        u"\u20DA": "&#8410;",
        u"\u20DB": "&#8411;",
        u"\u20DC": "&#8412;",
        u"\u20DD": "&#8413;",
        u"\u20DE": "&#8414;",
        u"\u20DF": "&#8415;",
        u"\u20E0": "&#8416;",
        u"\u20E1": "&#8417;",
        u"\u20E2": "&#8418;",
        u"\u20E3": "&#8419;",
        u"\u20E4": "&#8420;",
        u"\u20E5": "&#8421;",
        u"\u20E6": "&#8422;",
        u"\u20E7": "&#8423;",
        u"\u20E8": "&#8424;",
        u"\u20E9": "&#8425;",
        u"\u20EA": "&#8426;",
        u"\u20EB": "&#8427;",
        u"\u20EC": "&#8428;",
        u"\u20ED": "&#8429;",
        u"\u20EE": "&#8430;",
        u"\u20EF": "&#8431;",
        u"\u20F0": "&#8432;",
        u"\u20F1": "&#8433;",
        u"\u20F2": "&#8434;",
        u"\u20F3": "&#8435;",
        u"\u20F4": "&#8436;",
        u"\u20F5": "&#8437;",
        u"\u20F6": "&#8438;",
        u"\u20F7": "&#8439;",
        u"\u20F8": "&#8440;",
        u"\u20F9": "&#8441;",
        u"\u20FA": "&#8442;",
        u"\u20FB": "&#8443;",
        u"\u20FC": "&#8444;",
        u"\u20FD": "&#8445;",
        u"\u20FE": "&#8446;",
        u"\u20FF": "&#8447;",
        #
        u"\u26be": "", u"\u80cc": "", u"\u756a": "", u"\u53f7": "", u"\u76f8": "", u"\u4e92": "", u"\u30d5": "",
        u"\u30a9": "",
        u"\u30ed": "", u"\u65e5": "", u"\u30b9": "", u"\u30dd": "", u"\u30fc": "", u"\u30c4": "", u"\uff08": "",
        u"\u62e1": "",
        u"\u52df": "", u"\u3010": "", u'\u5b9a': "", u'\u96c6': "", u'\u4e2d': "", u'\u6563': "", u'\u5e0c': "",
        u'\ude0a': "",
        u'\u5b88': "", u'\u92ad': "", u'\u300c': "", u'\u6b66': "", u'\u58eb': "", u'\u6751': "", u'\u7530': "",
        u'\u4fee': "",
        u'\u4e00': "", u'\u3011': "", u'\u3000': "", u'\u9032': "", u'\u3081': "", u'\u3069': "", u'\u3053': "",
        u'\u307e': "",
        u'\u3067': "", u'\u3082': "", u'\udfc6': "", u'\ude0f': "", u'\ude0d': "", u'\u5de8': "", u'\u4eba': "",
        u'\u304c': "",
        u'\u512a': "", u'\ufffd': "",
        # emot
        u"\U0001f60f": "&#128527;", u"\U0001f602": "&#128514;", u"\U0001f60a": "&#128522;", u"\U0001f603": "&#128515;",
        u"\U0001f604": "&#128516;", u"\U0001f605": "&#128517;", u"\U0001f606": "&#128518;", u"\U0001f607": "&#128519;",
        u"\U0001f608": "&#128520;", u"\U0001f609": "&#128521;", u"\U0001f60b": "&#128523;", u"\U0001f60c": "&#128524;",
        u"\U0001f60d": "&#128525;", u"\U0001f60e": "&#128526;", u"\U0001f610": "&#128528;", u"\U0001f611": "&#128529;",
        u"\U0001f612": "&#128530;", u"\U0001f613": "&#128531;", u"\U0001f614": "&#128532;", u"\U0001f615": "&#128533;",
        u"\U0001f616": "&#128534;", u"\U0001f617": "&#128535;", u"\U0001f618": "&#128536;", u"\U0001f619": "&#128537;",
        u"\U0001f61a": "&#128538;", u"\U0001f61b": "&#128539;", u"\U0001f61c": "&#128540;", u"\U0001f61d": "&#128541;",
        u"\U0001f61e": "&#128542;", u"\U0001f61f": "&#128543;", u"\U0001f620": "&#128544;", u"\U0001f621": "&#128545;",
        u"\U0001f622": "&#128546;", u"\U0001f623": "&#128547;", u"\U0001f624": "&#128548;", u"\U0001f625": "&#128549;"
    }

    new_text = ''
    for char in text:
        if nonascii.get(char) is not None:
            new_text = new_text + nonascii.get(char)
        else:
            new_text = new_text + char
    return re.escape(new_text)


def slugfy(text, separator):
    ret = ""
    for c in text.lower():
        try:
            ret += htmlentitydefs.codepoint2name[ord(c)]
        except:
            ret += c

    ret = re.sub("([a-zA-Z])(uml|acute|grave|circ|tilde|cedil)", r"\1", ret)
    ret = re.sub("\W", " ", ret)
    ret = re.sub(" +", separator, ret)

    return ret.strip()


def find_value_in_array2args(arr, key):
    for item in arr:
        if item[1] == key:
            return item[0]
    return None


def find_value_in_array4args(arr, key, key2, key3):
    for item in arr:
        if item[1] == key and item[2] == key2 and item[3] == key3:
            return item[0]
    return None


def send_mail(subject, content):
    SERVER = "localhost"
    FROM = ""
    TO = [""]

    message = """\
    From: %s
    To: %s
    Subject: %s

    %s
    """ % (FROM, ", ".join(TO), subject, content)

    server = smtplib.SMTP(SERVER)
    server.sendmail(FROM, TO, message)
    server.quit()


def extract_hash_tags(s, hashtags):
    tags = [part[1:] for part in s.split() if part.startswith('#') and len(part) > 3]
    hashtags.append(tags)


def get_twitter_date(date_str):
    time_struct = time.strptime(date_str, "%a, %d %b %Y %H:%M:%S +0000")
    return datetime.fromtimestamp(time.mktime(time_struct))


def get_twitter_date2(date_str):
    time_tuple = parsedate_tz(date_str.strip())
    dt = datetime(*time_tuple[:6])
    return dt - timedelta(seconds=3600 * 5 + 300)
#    time.tzset()
#    time_struct = time.strptime(date_str, "%a %b %d %H:%M:%S +0000 %Y")
#    return datetime.fromtimestamp(time.mktime(time_struct))
